{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from \"@angular/core\";\nlet ShowUserBookingsComponent = class ShowUserBookingsComponent {\n  constructor(route, router, userService) {\n    this.route = route;\n    this.router = router;\n    this.userService = userService;\n    this.userId = null;\n    this.bookings = null;\n    this.found = false;\n    this.notFound = false;\n    this.passengers = null;\n    this.user = null;\n    this.bus = null;\n  }\n\n  ngOnInit() {\n    this.userId = localStorage.getItem(\"userId\");\n    console.log(this.userId);\n\n    if (this.userId == null) {\n      this.router.navigate([\"/error\", \"not logged in, login to continue\"]);\n    } else {\n      this.userId = parseInt(this.userId);\n      this.userService.getBookingByUser(this.userId).subscribe(data => {\n        console.log(data);\n        this.bookings = data;\n\n        if (this.bookings.length > 0) {\n          this.found = true;\n          this.notFound = false;\n        } else {\n          this.found = false;\n          this.notFound = true;\n        }\n      }, error => {\n        this.router.navigate([\"/error\", \"not logged in, login to continue\"]);\n      });\n      this.userService.getUser(this.userId).subscribe(data => {\n        this.user = data;\n      });\n    }\n  }\n  /* ------method to delete booking-------- */\n\n\n  delete(bookingId) {\n    if (confirm(\"are you sure you want to delete\")) {\n      this.passengers = null;\n      this.userService.deleteBooking(bookingId, this.userId).subscribe(data => {\n        console.log(\"deleted\");\n        this.userService.getBookingByUser(this.userId).subscribe(data => {\n          console.log(data);\n          this.bookings = data;\n\n          if (this.bookings.length > 0) {\n            this.found = true;\n            this.notFound = false;\n          } else {\n            this.found = false;\n            this.notFound = true;\n          }\n        }, error => {\n          this.router.navigate([\"/error\", \"not logged in, login to continue\"]);\n        });\n      }, error => {\n        this.router.navigate([\"/error\", \"cannot delete\"]);\n      });\n    }\n  }\n  /* ------method to get bus detais---------- */\n\n\n  getBusDetails(busNumber) {\n    this.passengers = null;\n    this.userService.getBusByNumber(busNumber).subscribe(data => {\n      this.bus = data;\n    }, error => {\n      this.router.navigate([\"/error\", \"no bus found or bus is deleted\"]);\n    });\n  }\n\n  updatePassenger(passengerId) {\n    this.router.navigate([\"/updatePassenger\", passengerId]);\n  }\n\n  getPassengers(booking) {\n    this.bus = null;\n    this.passengers = booking.passengers;\n  }\n\n  logout() {\n    localStorage.removeItem(\"userId\");\n    this.router.navigate([\"/userLogin\"]);\n  }\n\n};\nShowUserBookingsComponent = __decorate([Component({\n  selector: \"app-show-user-bookings\",\n  templateUrl: \"./show-user-bookings.component.html\",\n  styleUrls: [\"./show-user-bookings.component.css\"]\n})], ShowUserBookingsComponent);\nexport { ShowUserBookingsComponent };","map":null,"metadata":{},"sourceType":"module"}